<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <script defer src="/_vercel/insights/script.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css" />
  <link rel="stylesheet" href="styles.css" />
  <title>Text a Friend</title>
  <meta name="description" content="Pick a random person to text." />
</head>

<body>
  <h1 style="text-align: center; padding: 20px;">whototext.com</h1>
  <p id="mobileWarning" style="text-align: center; color: #666; display: none; font-style: italic;">Your experience may
    be better on desktop</p>

  <div class="container">
    <p id="timeText" style="text-align: left; color: #666;"></p>
    <textarea id="friendList" rows="10" placeholder="Paste your list of friends here, one per line..."></textarea>
    <br><br>
    <button onclick="getRandomFriend()">Text a Friend</button>

    <div id="openerSection" style="display: none;">
      <p style="color: #666;">You're texting:</p>
      <h3 id="result"></h3>
      <p style="color: #666;">You can open with:</p>
      <p id="opener"></p>
      <div id="openerButtons">
        <button onclick="getRandomOpener()">New Opener â†»</button>
        <button onclick="copyOpener(event)">Copy Text</button>
      </div>
    </div>
  </div>

  <details style="max-width: 600px; margin: 40px auto 0;">
    <summary style="cursor: pointer; color: #666;">How do I use this thing?</summary>
    <div style="padding: 10px 0;">
      <p>
        The goal of this website is to start a conversation with a friend, even if there's not a particular reason to do so.
        <br><br>
        Maybe you've both been busy recently and haven't caught up.
        <br><br>
        In order to do this, you need to paste a list of your friends (each on their own line) into the text box.
        <br><br>
        The easy method:
      <ol>
        <li>
          <strong>Prompt your favourite chatbot</strong><br>
          <span style="color: #777;">Copy+paste the below prompt into a chatbot (e.g. <a href="https://chatgpt.com/"
              target="_blank">ChatGPT</a>).</span>

          <blockquote id="promptText" style="padding: 15px; border-left: 4px solid #666; margin: 10px 0; color: #999;">
            I will give you a list of profiles copied from a social media site.
            <br>
            Return a list in the following format: Name (Handle)
            <br>
            Example: Joe (joe_handle)
            <br>
            Write only plain text, one profile per line, no bullet points, no preamble/fluff.
            <br>
            Most account handles will match their name. However, do not limit yourself to accounts with names in their
            handles.
            <br>
            List of profiles:
          </blockquote>
          <div style="text-align: center;">
            <button onclick="copyPrompt()" style="margin: 10px 0; background: #999; border-color: #444;">Copy Prompt</button>
          </div>
          <div style="text-align: center;">
            <img src="step1.png" alt="Example of chatbot prompt" style="max-width: 70%; margin: 10px 0;">
          </div>
        </li>
        <li>
          <strong>Append your friends list</strong><br>
          <span style="color: #777;">Copy a (messy) list of your friends, e.g. your <a href="https://www.instagram.com/" target="_blank">Instagram</a> followers list, and paste
            it at the end of the prompt. Let the chatbot correctly format your list for you.</span>
          <div style="text-align: center;">
            <img src="step2a.png" alt="Copying social media followers list" style="max-width: 70%; margin: 10px 0;">
            <img src="step2b.png" alt="Pasting the list into the prompt" style="max-width: 70%; margin: 10px 0;">
          </div>
        </li>
        <li>
          <strong>Copy the result</strong><br>
          <span style="color: #777;">Copy the result from the chatbot and paste it into the text box on this
            page.</span>
          <div style="text-align: center;">
            <img src="step3.png" alt="Copying the result from the chatbot" style="max-width: 70%; margin: 10px 0;">
          </div>
        </li>
        <li>
          <strong>Enjoy!</strong><br>
          <span style="color: #777;">Have a nice chat with someone you haven't talked to in a while.</span>

        </li>
      </ol>
      </p>
      <p style="color: #666; font-style: italic;">Note: For best results, you may want to chunk the list into ~50
        friends at a time. You may also need to tinker with the prompt a bit.</p>
    </div>
  </details>

  <footer style="text-align: center; padding: 20px; margin-top: 40px; color: #666;">
    Made by szge &middot; <a href="https://github.com/szge/whototext">GitHub</a> &middot; <a
      href="https://x.com/Monospastic">Twitter</a>
  </footer>

  <script>
    let hasGeneratedOnce = false;

    function saveFriendList() {
        const text = document.getElementById('friendList').value;
        localStorage.setItem('friendList', text);
    }

    function loadFriendList() {
        const savedList = localStorage.getItem('friendList');
        if (savedList) {
            document.getElementById('friendList').value = savedList;
        }
    }

    document.getElementById('friendList').addEventListener('input', saveFriendList);

    document.addEventListener('DOMContentLoaded', loadFriendList);

    const openers = {
      "casual": [
        "Hey! It's been forever - how have you been?",
        "Just thought of you and wanted to say hi! What's new in your world?",
        "Long time no chat! Hope you've been doing well ðŸ˜Š",
        "Realized we haven't caught up in ages - how's life treating you?"
      ],
      "nostalgic": [
        "Remember that time we [went hiking/took that road trip/had that movie marathon]? Made me smile thinking about it today!",
        "Was just reminiscing about [shared memory] and had to reach out! How've you been?",
        "Found an old photo of us from [event/place] and it made my day. Hope you're doing great!"
      ],
      "playful": [
        "ðŸš¨ Friend check-in alert! ðŸš¨ Requesting status update on your awesome life!",
        "Breaking news: I miss your face! How's everything?",
        "Performing scheduled friendship maintenance... *beep boop* How are you? ðŸ¤–",
        "Warning: Extreme catch-up session incoming! Are you prepared?"
      ],
      "thoughtful": [
        "Something reminded me of you today and I realized how much I miss our chats!",
        "The [book/movie/song] I just experienced made me think of you - would love to hear what you've been up to!",
        "Hey! No special reason - just wanted you to know you crossed my mind and I hope you're doing well!"
      ],
      "seasonal": [
        "This [perfect spring day/cozy winter evening/beautiful fall morning] made me think of you! How's your season going?",
        "Is it just me or is this weather giving total [inside joke] vibes? Hope you're enjoying it!",
        "Summer/winter/spring/fall check-in! What's been the highlight of your season so far?"
      ],
      "interestBased": [
        "Saw something that screamed [their interest] and had to share! How's your [hobby/passion] going lately?",
        "Just watched/read/heard something that gave me major [shared interest] vibes - made me think of our conversations! What's new?"
      ]
    }

    function getRandomOpener() {
      const categories = Object.keys(openers);
      const randomCategory = categories[Math.floor(Math.random() * categories.length)];
      const templates = openers[randomCategory];
      const randomTemplate = templates[Math.floor(Math.random() * templates.length)];
      document.getElementById('opener').textContent = randomTemplate;
    }

    function getRandomFriend() {
      const text = document.getElementById('friendList').value;
      const friends = text.split('\n').filter(line => line.trim() !== '');

      if (friends.length === 0) {
        const button = document.querySelector('button');
        const originalText = "Text a Friend";
        button.textContent = "You Need More Friends!";
        setTimeout(() => {
          button.textContent = originalText;
        }, 1000);
        return;
      }

      const randomFriend = friends[Math.floor(Math.random() * friends.length)];
      document.getElementById('result').textContent = randomFriend;

      getRandomOpener();
      if (!hasGeneratedOnce) {
        hasGeneratedOnce = true;
        document.getElementById('openerSection').style.display = 'block';
      }
    }

    function copyOpener(event) {
      const openerText = document.getElementById('opener').textContent;
      navigator.clipboard.writeText(openerText)
        .then(() => {
          const copyButton = event.target;
          const originalText = "Copy Text";
          copyButton.textContent = 'Copied!';
          setTimeout(() => {
            copyButton.textContent = originalText;
          }, 1000);
        })
        .catch(err => {
          console.error('Failed to copy text: ', err);
        });
    }

    function checkIfMobile() {
      const isMobile = window.innerWidth <= 768; // Common breakpoint for mobile devices
      document.getElementById('mobileWarning').style.display = isMobile ? 'block' : 'none';
    }

    // Call this when page loads and when window is resized
    checkIfMobile();
    window.addEventListener('resize', checkIfMobile);

    function updateTimeText() {
      const now = new Date();
      const day = now.toLocaleDateString('en-US', { weekday: 'long' });
      const hour = now.getHours();

      let timeOfDay;
      if (hour >= 5 && hour < 12) timeOfDay = 'morning';
      else if (hour >= 12 && hour < 17) timeOfDay = 'afternoon';
      else if (hour >= 17 && hour < 22) timeOfDay = 'evening';
      else timeOfDay = 'night';

      document.getElementById('timeText').innerHTML =
        `It's a ${day} ${timeOfDay} and you're bored. You have between 1 and <a href="https://en.wikipedia.org/wiki/Dunbar%27s_number" target="_blank">150</a> friends. You want to chat with someone, but don't have a reason to reach out to anyone in particular. This website is your reason.`;
    }

    // Call when page loads
    updateTimeText();

    function copyPrompt() {
      const promptText = document.getElementById('promptText').innerText;
      navigator.clipboard.writeText(promptText)
        .then(() => {
          const copyButton = document.querySelector('button[onclick="copyPrompt()"]');
          const originalText = "Copy Prompt";
          copyButton.textContent = 'Copied!';
          setTimeout(() => {
            copyButton.textContent = originalText;
          }, 1000);
        })
        .catch(err => {
          console.error('Failed to copy text: ', err);
        });
    }
  </script>
</body>

</html>