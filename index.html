<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <script defer src="/_vercel/insights/script.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css" />
  <link rel="stylesheet" href="styles.css" />
  <title>Text a Friend</title>
  <meta name="description" content="Pick a random person to text." />
</head>

<body>
  <h1 style="text-align: center; padding: 20px;">whototext.com</h1>
  <p id="mobileWarning" style="text-align: center; color: #666; display: none; font-style: italic;">Your experience may be better on desktop</p>

  <div class="container">
    <p id="timeText" style="text-align: left; color: #666;"></p>
    <textarea id="friendList" rows="10" placeholder="Paste your list of friends here, one per line..."></textarea>
    <br><br>
    <button onclick="getRandomFriend()">Text a Friend</button>

    <div id="openerSection" style="display: none;">
      <p style="color: #666;">You're texting:</p>
      <h3 id="result"></h3>
      <p style="color: #666;">You can open with:</p>
      <p id="opener"></p>
      <div id="openerButtons">
        <button onclick="getRandomOpener()">New Opener â†»</button>
        <button onclick="copyOpener(event)">Copy Text</button>
      </div>
    </div>
  </div>

  <script>
    let hasGeneratedOnce = false;

    const openers = {
      "casual": [
        "Hey! It's been forever - how have you been?",
        "Just thought of you and wanted to say hi! What's new in your world?",
        "Long time no chat! Hope you've been doing well ðŸ˜Š",
        "Realized we haven't caught up in ages - how's life treating you?"
      ],
      "nostalgic": [
        "Remember that time we [went hiking/took that road trip/had that movie marathon]? Made me smile thinking about it today!",
        "Was just reminiscing about [shared memory] and had to reach out! How've you been?",
        "Found an old photo of us from [event/place] and it made my day. Hope you're doing great!"
      ],
      "playful": [
        "ðŸš¨ Friend check-in alert! ðŸš¨ Requesting status update on your awesome life!",
        "Breaking news: I miss your face! How's everything?",
        "Performing scheduled friendship maintenance... *beep boop* How are you? ðŸ¤–",
        "Warning: Extreme catch-up session incoming! Are you prepared?"
      ],
      "thoughtful": [
        "Something reminded me of you today and I realized how much I miss our chats!",
        "The [book/movie/song] I just experienced made me think of you - would love to hear what you've been up to!",
        "Hey! No special reason - just wanted you to know you crossed my mind and I hope you're doing well!"
      ],
      "seasonal": [
        "This [perfect spring day/cozy winter evening/beautiful fall morning] made me think of you! How's your season going?",
        "Is it just me or is this weather giving total [inside joke] vibes? Hope you're enjoying it!",
        "Summer/winter/spring/fall check-in! What's been the highlight of your season so far?"
      ],
      "interestBased": [
        "Saw something that screamed [their interest] and had to share! How's your [hobby/passion] going lately?",
        "Just watched/read/heard something that gave me major [shared interest] vibes - made me think of our conversations! What's new?"
      ]
    }

    function getRandomOpener() {
      const categories = Object.keys(openers);
      const randomCategory = categories[Math.floor(Math.random() * categories.length)];
      const templates = openers[randomCategory];
      const randomTemplate = templates[Math.floor(Math.random() * templates.length)];
      document.getElementById('opener').textContent = randomTemplate;
    }

    function getRandomFriend() {
      const text = document.getElementById('friendList').value;
      const friends = text.split('\n').filter(line => line.trim() !== '');

      if (friends.length === 0) {
        document.getElementById('result').textContent = 'Please get some friends (or add them to the list)!';
        return;
      }

      const randomFriend = friends[Math.floor(Math.random() * friends.length)];
      document.getElementById('result').textContent = randomFriend;

      getRandomOpener();
      if (!hasGeneratedOnce) {
        hasGeneratedOnce = true;
        document.getElementById('openerSection').style.display = 'block';
      }
    }

    function copyOpener(event) {
      const openerText = document.getElementById('opener').textContent;
      navigator.clipboard.writeText(openerText)
        .then(() => {
          const copyButton = event.target;
          const originalText = "Copy Text";
          copyButton.textContent = 'Copied!';
          setTimeout(() => {
            copyButton.textContent = originalText;
          }, 1000);
        })
        .catch(err => {
          console.error('Failed to copy text: ', err);
        });
    }

    function checkIfMobile() {
      const isMobile = window.innerWidth <= 768; // Common breakpoint for mobile devices
      document.getElementById('mobileWarning').style.display = isMobile ? 'block' : 'none';
    }
    
    // Call this when page loads and when window is resized
    checkIfMobile();
    window.addEventListener('resize', checkIfMobile);

    function updateTimeText() {
      const now = new Date();
      const day = now.toLocaleDateString('en-US', { weekday: 'long' });
      const hour = now.getHours();
      
      let timeOfDay;
      if (hour >= 5 && hour < 12) timeOfDay = 'morning';
      else if (hour >= 12 && hour < 17) timeOfDay = 'afternoon';
      else if (hour >= 17 && hour < 22) timeOfDay = 'evening';
      else timeOfDay = 'night';
      
      document.getElementById('timeText').textContent = 
        `It's a ${day} ${timeOfDay} and you're bored. You have between 1 and 150 friends. You want to chat with someone, but don't have a reason to reach out to anyone in particular. This website is your reason.`;
    }
    
    // Call when page loads
    updateTimeText();
  </script>
  
  <footer style="text-align: center; padding: 20px; margin-top: 40px; color: #666;">
    Made by <a href="https://github.com/szge">szge</a> &middot; 
  </footer>
</body>

</html>